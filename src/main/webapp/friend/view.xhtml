<ui:composition template="/template/default/template.xhtml" 
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
    <ui:define name="title">#{localeBean.getString('Contatos')}</ui:define>
    <!-- BEGIN PAGE STYLES -->
    <ui:define name="styles">
        <link type="text/css" rel="StyleSheet" media="all" href="/resources/common/css/friend-view.css"></link>
    </ui:define>
    <!-- END PAGE STYLES -->
    <ui:define name="content">
        <f:metadata>
            <f:event type="preRenderComponent" listener="#{friendViewBean.init()}"/>
        </f:metadata>
        <h:form prependId="false">            
            <h1 id="title_friends">#{localeBean.getString("Amigos")} (0)</h1>
            <input class="friend-search pull-right" placeholder="Buscar amigos" type="text"/>
            <div class="clear"></div>
            <div id="user-list" class="category">
                <ui:repeat value="#{friendViewBean.acceptedList}" var="friend">
                    <div class="col">
                        <div class="user">
                            <a href="/profile/view.xhtml?id=#{friend.tokenFriend2.socialProfile.socialProfileId}"><img class="image" src="#{friend.tokenFriend2.socialProfile.photo}"></img></a>
                            <p class="user-name">
                                <a href="/profile/view.xhtml?id=#{friend.tokenFriend2.socialProfile.socialProfileId}">#{friend.tokenFriend2.socialProfile.name}</a>
                            </p>
                            <p class="user-job">#{friend.tokenFriend2.socialProfile.occupationsId.name}</p>
                            <div class="user-arrow pull-right"/>
                            <div class="user-menu-box">
                                <p><img src="../resources/common/images/icon-profile.jpg"></img><span class="first"><a onclick="showBox('#{friend.tokenFriend2.socialProfile.socialProfileId}', '#{friend.tokenFriend2.socialProfile.name}', null, null, null, null)" href="#">#{localeBean.getString('Bate-papo')}</a></span></p>
                                <p><img src="../resources/common/images/icon-close.jpg"></img><span class="first"><h:commandLink action="#{friendViewBean.removeFriend(friend.tokenFriend2.socialProfile.socialProfileId)}">#{localeBean.getString('Remover amigo')}</h:commandLink></span></p>
                            </div>
                        </div>
                    </div>
                </ui:repeat>
            </div>
            <div class="clear"></div>
            <h1 id="title_pending">Solicitações pendentes (0)</h1>
            <div>
                <ui:repeat value="#{friendViewBean.pendingList}" var="pending">
                    <div class="col">
                        <div class="user">
                            <a href="/profile/view.xhtml?id=#{pending.tokenFriend2.socialProfile.socialProfileId}"><img class="image" src="#{pending.tokenFriend2.socialProfile.photo}"></img></a>
                            <p class="user-name">
                                <a href="/profile/view.xhtml?id=#{pending.tokenFriend2.socialProfile.socialProfileId}">#{pending.tokenFriend2.socialProfile.name}</a>
                            </p>
                            <p class="user-job">#{pending.tokenFriend2.socialProfile.occupationsId.name}</p>
                            <h:commandLink id="add_pending_friend" class="accept_button fa fa-check-circle" title="#{localeBean.getString('Aceitar')}" action="#{friendViewBean.acceptFriend(pending.tokenFriend2.socialProfile.socialProfileId)}">
                                <f:ajax execute="add_pending_friend" render="@form"/>
                            </h:commandLink>
                            <h:commandLink id="remove_pending_friend" class="reject_button fa fa-times-circle" title="#{localeBean.getString('Rejeitar')}" action="#{friendViewBean.removeFriend(pending.tokenFriend2.socialProfile.socialProfileId)}">
                                <f:ajax execute="remove_pending_friend" render="@form"/>
                            </h:commandLink>
                        </div>
                    </div>
                </ui:repeat>
            </div>
            <div class="clear"></div>
        </h:form>
    </ui:define>
    <!-- BEGIN PAGE SCRIPTS -->
    <ui:define name="scripts">
        <script type="text/javascript" src="../resources/common/js/friend-view.js"/>
    </ui:define>
    <!-- END PAGE SCRIPTS -->
</ui:composition>
