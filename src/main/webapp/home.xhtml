<ui:composition template="/template/default/template.xhtml" 
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
    <ui:define name="title">#{localeBean.getString('Início')}</ui:define>
    <!-- BEGIN PAGE STYLES -->
    <ui:define name="styles">
        <link type="text/css" rel="StyleSheet" media="all" href="/resources/common/css/home.css"></link>
    </ui:define>
    <!-- END PAGE STYLES -->
    <ui:define name="content">
        <f:metadata>
            <f:event type="preRenderComponent" listener="#{homeBean.init()}"/>
        </f:metadata>
        <h1>Últimos objetos educacionais</h1>
        <h:form prependId="false">
            <h:panelGroup layout="block" id="object-column" class="column">
                <ui:repeat value="#{homeBean.educationalObjectList}" var="educationalObject" >
                    <div class="column-list-item">
                        <a href="/educational-object/view.xhtml?id=#{educationalObject.id}"><img class="column-list-image" src="#{educationalObject.image}"/></a>
                        <h2 class="column-object-title"><a href="/educational-object/view.xhtml?id=#{educationalObject.id}">#{educationalObject.name}</a></h2>
                        <small class="column-object-author"> Publicado por 
                            <a href="/profile/view.xhtml?id=#{educationalObject.socialProfileId.socialProfileId}">#{educationalObject.socialProfileId.name}</a>
                        </small>
                        <p class="column-object-date"><img src="/resources/common/images/clock.png"/>
                            <h:outputText styleClass="educational_object_date" value="#{educationalObject.date}">
                                <f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-3"></f:convertDateTime>
                            </h:outputText>
                        </p>
                        <p class="column-object-description">
                            <!--descritivo do objeto educacional-->
                            <ui:repeat var="tag" value="#{educationalObject.tagsCollection}">
                                <span>##{tag.name}</span>
                            </ui:repeat>
                        </p>
                        <p class="column-object-comments"><img src="/resources/common/images/comments.png"/>0</p>
                        <div class="clear"></div>
                    </div>
                </ui:repeat>
                <div class="load-more">
                    <hr/>
                    <h:commandLink value="Carregar mais" action="#{homeBean.getMoreEducationalObjects()}" rendered="#{homeBean.existsMoreEducationalObjects}">
                        <f:ajax render="object-column"/>
                    </h:commandLink>
                    <h:outputText styleClass="no-more" value="#{localeBean.getString('Não há mais Objetos Educacionais')}" rendered="#{!homeBean.existsMoreEducationalObjects}"/>
                    <hr/>
                </div>
            </h:panelGroup>
            <aside>
                <h:panelGroup layout="block" id="aside-container" class="aside-container">
                    <h3>Novidades na rede</h3>
                    <div class="aside-list-item">
                        <img class="aside-list-image" src="http://placehold.it/75x75"/>
                        <p class="aside-profile-name"><a href="#">Laís Thiele Carvalho</a></p>
                        <p class="aside-profile-action">comentou no tópico</p>
                        <p class="aside-object-title"><a href="">"Manual do Objeto Educacional - Arte com Ciência"</a></p>
                        <div class="clear"></div>
                    </div>
                    <div class="aside-list-item">
                        <img class="aside-list-image" src="http://placehold.it/75x75"/>
                        <p class="aside-profile-name"><a href="#">Dândolo Santos</a></p>
                        <p class="aside-profile-action">comentou no tópico</p>
                        <p class="aside-object-title"><a href="">"Manual do Objeto Educacional - Arte com Ciência</a></p>
                        <div class="clear"></div>
                    </div>
                    <div class="aside-list-item">
                        <img class="aside-list-image" src="http://placehold.it/75x75"/>
                        <p class="aside-profile-name"><a href="#">Dândolo Santos</a></p>
                        <p class="aside-profile-action">criou o tópico</p>
                        <p class="aside-object-title"><a href="">"Manual do Objeto Educacional - Arte com Ciência"</a></p>
                        <div class="clear"></div>
                    </div>
                    <div class="aside-list-item">
                        <img class="aside-list-image" src="http://placehold.it/75x75"/>
                        <p class="aside-profile-name"><a href="#">Marcel Magalhães</a></p>
                        <p class="aside-profile-action">criou o tópico</p>
                        <p class="aside-object-title"><a href="">"Introdução à edição de vídeo"</a></p>
                        <div class="clear"></div>
                    </div>
                </h:panelGroup>
                <div class="load-more">
                    <hr/>
                    <h:commandLink value="Carregar mais" action="#{homeBean.getMoreEducationalObjects()}" rendered="#{homeBean.existsMoreEducationalObjects}">
                        <f:ajax render="aside-container"/>
                    </h:commandLink>
                    <h:outputText styleClass="no-more" value="#{localeBean.getString('Não há mais Objetos Educacionais')}" rendered="#{!homeBean.existsMoreEducationalObjects}"/>
                    <hr/>
                </div>
            </aside>
            <div class="clear"></div>
        </h:form>

        <h:panelGroup styleClass="right_column">
            <h:outputText styleClass="network_news" value="#{localeBean.getString('Novidades na rede').toUpperCase()}"/>
            <h:panelGroup class="user_feed">
                <ui:repeat var="newActivity" value="#{homeBean.newActivityList}">
                    <h:link styleClass="publisher_image" outcome="/profile/view.xhtml?id=#{newActivity.socialProfile.socialProfileId}" style="background:url('#{newActivity.socialProfile.photo}') no-repeat center center;background-size:77px;"></h:link>
                    <h:panelGroup styleClass="text_feed">
                        <h:link styleClass="user_news_name" outcome="/profile/view.xhtml?id=#{newActivity.socialProfile.socialProfileId}" value="#{newActivity.socialProfile.name}"></h:link>
                        <h:outputText value="#{localeBean.getString('criou o tópico')}" rendered="#{newActivity.type.equals('T')}"/>
                        <h:outputText value="#{localeBean.getString('comentou no tópico')}" rendered="#{newActivity.type.equals('M')}"/>
                        <h:link styleClass="social_news_name" outcome="/discussion-topic/view.xhtml?id=#{newActivity.id}" value="&quot;#{newActivity.title}&quot;"/>
                    </h:panelGroup>
                </ui:repeat>
            </h:panelGroup>
        </h:panelGroup>
    </ui:define>
    <!-- BEGIN PAGE SCRIPTS -->
    <ui:define name="scripts">
        <script type="text/javascript" src="/resources/common/js/home.js"></script>
    </ui:define>
    <!-- END PAGE SCRIPTS -->
</ui:composition>

