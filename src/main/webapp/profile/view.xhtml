<ui:composition template="/template/default/template.xhtml" 
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
    <ui:define name="title">#{localeBean.getString('Perfil')}</ui:define>
    <!-- BEGIN PAGE STYLES -->
    <ui:define name="styles">
        <link type="text/css" rel="StyleSheet" media="all" href="../resources/lib/css/jquery.Jcrop.min.css"></link>
        <link type="text/css" rel="StyleSheet" media="all" href="../resources/common/css/profile-view.css"></link>
    </ui:define>
    <!-- END PAGE STYLES -->
    <ui:define name="content">
        <f:metadata>
            <f:event type="preRenderComponent" listener="#{profileViewBean.init()}"/>
        </f:metadata>
        <h:form prependId="false" enctype="multipart/form-data" acceptcharset="UTF-8">
            <h:inputHidden id="social-profile-id" value="#{profileViewBean.socialProfile.socialProfileId}"/>
            <h:inputHidden id="social-profile-name" value="#{profileViewBean.socialProfile.name}"/>
            <div class="profile-cover-image">
                <img src="#{profileViewBean.socialProfile.coverPhoto}"/>
                <h:panelGroup rendered="#{profileViewBean.himself}" class="edit-photo cover-photo fa fa-pencil"/>
            </div>
            <div class="profile-resume">
                <div class="profile-image">
                    <img src="#{profileViewBean.socialProfile.photo}"/>
                    <h:panelGroup rendered="#{profileViewBean.himself}" class="edit-photo photo fa fa-pencil"/>
                </div>
                <p class="image-error"></p>
                <div class="profile-name">
                    <h1>#{profileViewBean.socialProfile.name}</h1>
                    <h:panelGroup layout="block" id="editable-profile-occupation" class="editable-container">
                        <ui:fragment rendered="#{!profileViewBean.editFieldList.contains('occupation')}">
                            <ui:fragment rendered="#{profileViewBean.socialProfile.occupationsId.name != null}">
                                <p>#{profileViewBean.socialProfile.occupationsId.name}</p>
                                <ui:fragment rendered="#{profileViewBean.himself}">
                                    <i class="edit-pencil fa fa-pencil"></i>
                                </ui:fragment>
                            </ui:fragment>
                            <ui:fragment rendered="#{profileViewBean.socialProfile.occupationsId.name == null and profileViewBean.himself}">
                                <a class="add-new">
                                    <i class="fa fa-plus-square"></i> 
                                    <span>Adicionar ocupação</span>
                                </a>
                            </ui:fragment>
                        </ui:fragment>
                        <ui:fragment rendered="#{profileViewBean.editFieldList.contains('occupation')}">
                            <h:inputText pt:placeholder="Qual a sua ocupação?" id="occupation-input" styleClass="editable-field" value="#{profileViewBean.editableFieldValue}"/>
                            <h:commandLink styleClass="edit-button">
                                <i class="fa fa-chevron-circle-right"></i>
                                <f:ajax listener="#{profileViewBean.editField('occupation')}" execute="occupation-input" render="editable-profile-occupation editable-profile-occupation-2"></f:ajax>
                            </h:commandLink>
                        </ui:fragment>
                        <h:commandLink styleClass="add-new-action occupation">
                            <f:ajax listener="#{profileViewBean.showEditField('occupation')}" render="editable-profile-occupation"></f:ajax>
                        </h:commandLink>
                    </h:panelGroup>
                </div>
                <div class="profile-status">
                    <h:panelGroup layout="block" id="editable-profile-status" class="editable-container">
                        <ui:fragment rendered="#{!profileViewBean.editFieldList.contains('description')}">
                            <ui:fragment rendered="#{profileViewBean.socialProfile.description != null}">
                                <p class="inline">#{profileViewBean.socialProfile.description}</p>
                                <ui:fragment rendered="#{profileViewBean.himself}">
                                    <i class="edit-pencil fa fa-pencil"></i>
                                </ui:fragment>
                            </ui:fragment>
                            <ui:fragment rendered="#{profileViewBean.socialProfile.description == null and profileViewBean.himself}">
                                <a class="add-new">
                                    <i class="fa fa-plus-square"></i> 
                                    <span>Adicionar uma descrição</span>
                                </a>
                            </ui:fragment>
                        </ui:fragment>
                        <ui:fragment rendered="#{profileViewBean.editFieldList.contains('description')}">
                            <h:inputTextarea pt:placeholder="Quem é você?" id="description-input" styleClass="editable-field editable-textarea" value="#{profileViewBean.editableFieldValue}"/>
                            <h:commandLink styleClass="edit-button">
                                <i class="fa fa-chevron-circle-right"></i>
                                <f:ajax listener="#{profileViewBean.editField('description')}" execute="description-input" render="editable-profile-status"></f:ajax>
                            </h:commandLink>
                        </ui:fragment>
                        <h:commandLink styleClass="add-new-action description">
                            <f:ajax listener="#{profileViewBean.showEditField('description')}" render="editable-profile-status"></f:ajax>
                        </h:commandLink>
                    </h:panelGroup>
                </div>
                <div class="clear"/>
            </div>
            <ui:fragment rendered="#{!profileViewBean.himself}">
                <h:panelGroup layout="block" id="profile-options" class="profile-options">
                    <ui:fragment rendered="#{profileViewBean.isFriend().status eq 'AC'}">
                        <h:commandLink>
                            <img class="friend-status" src="../resources/common/images/remove-friend-gray.png"/>
                            <f:ajax listener="#{profileViewBean.removeFriend}" render="profile-options"/>
                        </h:commandLink>
                    </ui:fragment>
                    <ui:fragment rendered="#{profileViewBean.isFriend().status eq 'PE'}">
                        <h:commandLink>
                            <img class="friend-status" src="../resources/common/images/pending-friend-gray.png"/>
                            <f:ajax listener="#{profileViewBean.removeFriend}" render="profile-options"/>
                        </h:commandLink>
                    </ui:fragment>
                    <ui:fragment rendered="#{profileViewBean.isFriend().status eq null}">
                        <h:commandLink>
                            <img class="friend-status" src="../resources/common/images/add-friend-gray.png"/>
                            <f:ajax listener="#{profileViewBean.addFriend}" render="profile-options"/>
                        </h:commandLink>
                    </ui:fragment>
                    <img class="open-chat" src="../resources/common/images/chat.png"/>
                </h:panelGroup>
            </ui:fragment>
            <div class="profile-tabs">
                <ul>
                    <li id="profile-tab-about" class="active"><span class="tab tab-about">Sobre</span></li>
                    <li id="profile-tab-objects"><span class="tab tab-objects">Objetos Educacionais</span></li>
                    <li id="profile-tab-resume"><span class="tab tab-resume">Currículo</span></li>
                </ul>
            </div>
            <div class="clear"></div>
            <div id="profile-container-about" class="profile-container">
                <div class="profile-column-left">
                    <div class="profile-about-list">
                        <div class="profile-about-title">
                            <h3>
                                <img id="profile-icon-heart" src="../resources/common/images/heart.png"/>
                                Matérias<br/> de Interesse
                            </h3>
                        </div>
                        <div class="profile-about-description">
                            <h:panelGroup layout="block" id="editable-profile-matters" class="editable-container">
                                <ui:fragment rendered="#{!profileViewBean.editFieldList.contains('mattersOfInterest')}">
                                    <ui:fragment rendered="#{profileViewBean.socialProfile.mattersOfInterest != null}">
                                        <p>#{profileViewBean.socialProfile.mattersOfInterest}</p>
                                        <ui:fragment rendered="#{profileViewBean.himself}">
                                            <i class="edit-pencil fa fa-pencil"></i>
                                        </ui:fragment>
                                    </ui:fragment>
                                    <ui:fragment rendered="#{profileViewBean.socialProfile.mattersOfInterest == null and profileViewBean.himself}">
                                        <a class="add-new">
                                            <i class="fa fa-plus-square"></i> 
                                            <span>Adicionar</span>
                                        </a>
                                    </ui:fragment>
                                </ui:fragment>
                                <ui:fragment rendered="#{profileViewBean.editFieldList.contains('mattersOfInterest')}">
                                    <h:inputText pt:placeholder="Quais assuntos lhe interessa?" id="matters-input" styleClass="editable-field editable-social-interest " value="#{profileViewBean.editableFieldValue}"/>
                                    <h:commandLink styleClass="edit-button">
                                        <i class="fa fa-chevron-circle-right"></i>
                                        <f:ajax listener="#{profileViewBean.editField('mattersOfInterest')}" execute="matters-input" render="editable-profile-matters"></f:ajax>
                                    </h:commandLink>
                                </ui:fragment>
                                <h:commandLink styleClass="add-new-action matters">
                                    <f:ajax listener="#{profileViewBean.showEditField('mattersOfInterest')}" render="editable-profile-matters"></f:ajax>
                                </h:commandLink>
                            </h:panelGroup>
                        </div>
                        <div class="clear"></div>
                    </div>
                    <hr />
                    <div class="profile-about-list">
                        <div class="profile-about-title">
                            <h3>
                                <img id="profile-icon-music" src="../resources/common/images/music.png"/>
                                Músicas
                            </h3>
                        </div>
                        <div class="profile-about-description">
                            <h:panelGroup layout="block" id="editable-profile-musics" class="editable-container">
                                <ui:fragment rendered="#{!profileViewBean.editFieldList.contains('musics')}">
                                    <ui:fragment rendered="#{profileViewBean.socialProfile.musics != null}">
                                        <p>#{profileViewBean.socialProfile.musics}</p>
                                        <ui:fragment rendered="#{profileViewBean.himself}">
                                            <i class="edit-pencil fa fa-pencil"></i>
                                        </ui:fragment>
                                    </ui:fragment>
                                    <ui:fragment rendered="#{profileViewBean.socialProfile.musics == null and profileViewBean.himself}">
                                        <a class="add-new">
                                            <i class="fa fa-plus-square"></i> 
                                            <span>Adicionar</span>
                                        </a>
                                    </ui:fragment>
                                </ui:fragment>
                                <ui:fragment rendered="#{profileViewBean.editFieldList.contains('musics')}">
                                    <h:inputText pt:placeholder="Quais músicas você gosta de ouvir?" id="musics-input" styleClass="editable-field editable-social-interest " value="#{profileViewBean.editableFieldValue}"/>
                                    <h:commandLink styleClass="edit-button">
                                        <i class="fa fa-chevron-circle-right"></i>
                                        <f:ajax listener="#{profileViewBean.editField('musics')}" execute="musics-input" render="editable-profile-musics"></f:ajax>
                                    </h:commandLink>
                                </ui:fragment>
                                <h:commandLink styleClass="add-new-action musics">
                                    <f:ajax listener="#{profileViewBean.showEditField('musics')}" render="editable-profile-musics"></f:ajax>
                                </h:commandLink>
                            </h:panelGroup>
                        </div>
                        <div class="clear"></div>
                    </div>
                    <hr />
                    <div class="profile-about-list">
                        <div class="profile-about-title">
                            <h3>
                                <img id="profile-icon-book" src="../resources/common/images/book.png"/>
                                Livros
                            </h3>
                        </div>
                        <div class="profile-about-description">
                            <h:panelGroup layout="block" id="editable-profile-books" class="editable-container">
                                <ui:fragment rendered="#{!profileViewBean.editFieldList.contains('books')}">
                                    <ui:fragment rendered="#{profileViewBean.socialProfile.books != null}">
                                        <p>#{profileViewBean.socialProfile.books}</p>
                                        <ui:fragment rendered="#{profileViewBean.himself}">
                                            <i class="edit-pencil fa fa-pencil"></i>
                                        </ui:fragment>
                                    </ui:fragment>
                                    <ui:fragment rendered="#{profileViewBean.socialProfile.books == null and profileViewBean.himself}">
                                        <a class="add-new">
                                            <i class="fa fa-plus-square"></i> 
                                            <span>Adicionar</span>
                                        </a>
                                    </ui:fragment>
                                </ui:fragment>
                                <ui:fragment rendered="#{profileViewBean.editFieldList.contains('books')}">
                                    <h:inputText pt:placeholder="Quais livros você gostou de ler?" id="books-input" styleClass="editable-field editable-social-interest " value="#{profileViewBean.editableFieldValue}"/>
                                    <h:commandLink styleClass="edit-button">
                                        <i class="fa fa-chevron-circle-right"></i>
                                        <f:ajax listener="#{profileViewBean.editField('books')}" execute="books-input" render="editable-profile-books"></f:ajax>
                                    </h:commandLink>
                                </ui:fragment>
                                <h:commandLink styleClass="add-new-action books">
                                    <f:ajax listener="#{profileViewBean.showEditField('books')}" render="editable-profile-books"></f:ajax>
                                </h:commandLink>
                            </h:panelGroup>
                        </div>
                        <div class="clear"></div>
                    </div>
                    <hr />
                    <div class="profile-about-list">
                        <div class="profile-about-title">
                            <h3>
                                <img id="profile-icon-movie" src="../resources/common/images/movie.png"/>
                                Filmes
                            </h3>
                        </div>
                        <div class="profile-about-description">
                            <h:panelGroup layout="block" id="editable-profile-movies" class="editable-container">
                                <ui:fragment rendered="#{!profileViewBean.editFieldList.contains('movies')}">
                                    <ui:fragment rendered="#{profileViewBean.socialProfile.movies != null}">
                                        <p>#{profileViewBean.socialProfile.movies}</p>
                                        <ui:fragment rendered="#{profileViewBean.himself}">
                                            <i class="edit-pencil fa fa-pencil"></i>
                                        </ui:fragment>
                                    </ui:fragment>
                                    <ui:fragment rendered="#{profileViewBean.socialProfile.movies == null and profileViewBean.himself}">
                                        <a class="add-new">
                                            <i class="fa fa-plus-square"></i> 
                                            <span>Adicionar</span>
                                        </a>
                                    </ui:fragment>
                                </ui:fragment>
                                <ui:fragment rendered="#{profileViewBean.editFieldList.contains('movies')}">
                                    <h:inputText pt:placeholder="Quais filmes você assistiu e adorou?" id="movies-input" styleClass="editable-field editable-social-interest " value="#{profileViewBean.editableFieldValue}"/>
                                    <h:commandLink styleClass="edit-button">
                                        <i class="fa fa-chevron-circle-right"></i>
                                        <f:ajax listener="#{profileViewBean.editField('movies')}" execute="movies-input" render="editable-profile-movies"></f:ajax>
                                    </h:commandLink>
                                </ui:fragment>
                                <h:commandLink styleClass="add-new-action movies">
                                    <f:ajax listener="#{profileViewBean.showEditField('movies')}" render="editable-profile-movies"></f:ajax>
                                </h:commandLink>
                            </h:panelGroup>
                        </div>
                        <div class="clear"></div>
                    </div>
                    <hr />
                    <div class="profile-about-list">
                        <div class="profile-about-title">
                            <h3>
                                <img id="profile-icon-sport" src="../resources/common/images/sport.png"/>
                                Esportes
                            </h3>
                        </div>
                        <div class="profile-about-description">
                            <h:panelGroup layout="block" id="editable-profile-sports" class="editable-container">
                                <ui:fragment rendered="#{!profileViewBean.editFieldList.contains('sports')}">
                                    <ui:fragment rendered="#{profileViewBean.socialProfile.sports != null}">
                                        <p>#{profileViewBean.socialProfile.sports}</p>
                                        <ui:fragment rendered="#{profileViewBean.himself}">
                                            <i class="edit-pencil fa fa-pencil"></i>
                                        </ui:fragment>
                                    </ui:fragment>
                                    <ui:fragment rendered="#{profileViewBean.socialProfile.sports == null and profileViewBean.himself}">
                                        <a class="add-new">
                                            <i class="fa fa-plus-square"></i> 
                                            <span>Adicionar</span>
                                        </a>
                                    </ui:fragment>
                                </ui:fragment>
                                <ui:fragment rendered="#{profileViewBean.editFieldList.contains('sports')}">
                                    <h:inputText pt:placeholder="Quais esportes você gosta de praticar?" id="sports-input" styleClass="editable-field editable-social-interest " value="#{profileViewBean.editableFieldValue}"/>
                                    <h:commandLink styleClass="edit-button">
                                        <i class="fa fa-chevron-circle-right"></i>
                                        <f:ajax listener="#{profileViewBean.editField('sports')}" execute="sports-input" render="editable-profile-sports"></f:ajax>
                                    </h:commandLink>
                                </ui:fragment>
                                <h:commandLink styleClass="add-new-action sports">
                                    <f:ajax listener="#{profileViewBean.showEditField('sports')}" render="editable-profile-sports"></f:ajax>
                                </h:commandLink>
                            </h:panelGroup>
                        </div>
                        <div class="clear"></div>
                    </div>
                    <hr />
                    <div class="profile-about-list">
                        <div class="profile-about-title">
                            <h3>
                                <img id="profile-icon-hobbie" src="../resources/common/images/hobbie.png"/>
                                Hobbies
                            </h3>
                        </div>
                        <div class="profile-about-description">
                            <h:panelGroup layout="block" id="editable-profile-hobbies" class="editable-container">
                                <ui:fragment rendered="#{!profileViewBean.editFieldList.contains('hobbies')}">
                                    <ui:fragment rendered="#{profileViewBean.socialProfile.hobbies != null}">
                                        <p>#{profileViewBean.socialProfile.hobbies}</p>
                                        <ui:fragment rendered="#{profileViewBean.himself}">
                                            <i class="edit-pencil fa fa-pencil"></i>
                                        </ui:fragment>
                                    </ui:fragment>
                                    <ui:fragment rendered="#{profileViewBean.socialProfile.hobbies == null and profileViewBean.himself}">
                                        <a class="add-new">
                                            <i class="fa fa-plus-square"></i> 
                                            <span>Adicionar</span>
                                        </a>
                                    </ui:fragment>
                                </ui:fragment>
                                <ui:fragment rendered="#{profileViewBean.editFieldList.contains('hobbies')}">
                                    <h:inputText pt:placeholder="Quais são seus hobbies?" id="hobbies-input" styleClass="editable-field editable-social-interest " value="#{profileViewBean.editableFieldValue}"/>
                                    <h:commandLink styleClass="edit-button">
                                        <i class="fa fa-chevron-circle-right"></i>
                                        <f:ajax listener="#{profileViewBean.editField('hobbies')}" execute="hobbies-input" render="editable-profile-hobbies"></f:ajax>
                                    </h:commandLink>
                                </ui:fragment>
                                <h:commandLink styleClass="add-new-action hobbies">
                                    <f:ajax listener="#{profileViewBean.showEditField('hobbies')}" render="editable-profile-hobbies"></f:ajax>
                                </h:commandLink>
                            </h:panelGroup>
                        </div>
                        <div class="clear"></div>
                    </div>
                </div>
                <div class="profile-column-right">
                    <p id="profile-icon-mail"><img src="../resources/common/images/mail.png"/><span title="#{profileViewBean.socialProfile.users.username}">#{profileViewBean.socialProfile.users.username}</span></p>
                    <p id="profile-icon-birthday">
                        <img src="../resources/common/images/birthday.png"/>
                        <h:panelGroup layout="block" id="editable-profile-birth-date" class="editable-container">
                            <ui:fragment rendered="#{!profileViewBean.editFieldList.contains('birthDate')}">
                                <ui:fragment rendered="#{profileViewBean.socialProfile.birthDate != null}">
                                    <p>#{profileViewBean.socialProfile.birthDate}</p>
                                    <ui:fragment rendered="#{profileViewBean.himself}">
                                        <i class="edit-pencil fa fa-pencil"></i>
                                    </ui:fragment>
                                </ui:fragment>
                                <ui:fragment rendered="#{profileViewBean.socialProfile.birthDate == null and profileViewBean.himself}">
                                    <a class="add-new">
                                        <i class="fa fa-plus-square"></i> 
                                        <span>Adicionar</span>
                                    </a>
                                </ui:fragment>
                            </ui:fragment>
                            <ui:fragment rendered="#{profileViewBean.editFieldList.contains('birthDate')}">
                                <h:inputText pt:placeholder="Data de nascimento" id="birth-date-input" maxlength="10" styleClass="editable-field editable-birth-date" value="#{profileViewBean.editableFieldValue}"/>
                                <h:commandLink styleClass="edit-button">
                                    <i class="fa fa-chevron-circle-right"></i>
                                    <f:ajax listener="#{profileViewBean.editField('birthDate')}" execute="birth-date-input" render="editable-profile-birth-date"></f:ajax>
                                </h:commandLink>
                            </ui:fragment>
                            <h:commandLink styleClass="add-new-action birth-date">
                                <f:ajax listener="#{profileViewBean.showEditField('birthDate')}" render="editable-profile-birth-date"></f:ajax>
                            </h:commandLink>
                        </h:panelGroup>
                    </p>
                </div>
                <div class="clear"></div>
            </div>
            <div id="profile-container-objects" class="profile-container">
                <div class="profile-column-left">
                    <ui:repeat value="#{profileViewBean.educationalObjectList}" var="educationalObject">
                        <div class="item-box-container">
                            <a href="/educational-object/view.xhtml?id=#{educationalObject.id}"><img class="item-box-img" src="#{educationalObject.image}"/></a>
                            <p class="item-box-title">Publicador</p>
                            <p class="item-box-aux">em</p>
                            <a class="item-box-title-bold" href="/educational-object/view.xhtml?id=#{educationalObject.id}"><p>#{educationalObject.name}</p></a>
                            <div class="item-box-date">
                                <img src="../resources/common/images/clock.png"/>
                                <h:outputText value="#{educationalObject.date}">
                                    <f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-3"></f:convertDateTime>
                                </h:outputText>
                            </div>
                        </div>
                    </ui:repeat>
                </div>
                <div class="profile-column-right">
                    <p class="profile-object-number"><span>#{profileViewBean.educationalObjectList.size()}</span><br />Objetos <br />Educacionais <br />publicados</p>
                </div>
                <div class="clear"></div>
            </div>
            <div id="profile-container-resume" class="profile-container">
                <div class="profile-column-left">
                    <div class="profile-resume-left">
                        <p class="profile-resume-title">Currículo</p>
                        <p class="profile-resume-name">#{profileViewBean.socialProfile.name}</p>
                        <h:panelGroup layout="block" id="editable-profile-occupation-2" class="editable-container">
                            <ui:fragment rendered="#{!profileViewBean.editFieldList.contains('occupation')}">
                                <ui:fragment rendered="#{profileViewBean.socialProfile.occupationsId.name != null}">
                                    <p class="profile-resume-occupation">#{profileViewBean.socialProfile.occupationsId.name}</p>
                                    <ui:fragment rendered="#{profileViewBean.himself}">
                                        <i class="edit-pencil fa fa-pencil"></i>
                                    </ui:fragment>
                                </ui:fragment>
                                <ui:fragment rendered="#{profileViewBean.socialProfile.occupationsId.name == null and profileViewBean.himself}">
                                    <a class="add-new">
                                        <i class="fa fa-plus-square"></i> 
                                        <span>Adicionar ocupação</span>
                                    </a>
                                </ui:fragment>
                            </ui:fragment>
                            <ui:fragment rendered="#{profileViewBean.editFieldList.contains('occupation')}">
                                <h:inputText pt:placeholder="Qual a sua ocupação?" id="occupation-2-input" styleClass="editable-field" value="#{profileViewBean.editableFieldValue}"/>
                                <h:commandLink styleClass="edit-button">
                                    <i class="fa fa-chevron-circle-right"></i>
                                    <f:ajax listener="#{profileViewBean.editField('occupation')}" execute="occupation-2-input" render="editable-profile-occupation-2 editable-profile-occupation"></f:ajax>
                                </h:commandLink>
                            </ui:fragment>
                            <h:commandLink styleClass="add-new-action occupation-2">
                                <f:ajax listener="#{profileViewBean.showEditField('occupation')}" render="editable-profile-occupation-2"></f:ajax>
                            </h:commandLink>
                        </h:panelGroup>
                    </div>
                    <div class="profile-resume-right">
                        <p class="bold">#{profileViewBean.socialProfile.users.username}</p>
                        <h:panelGroup layout="block" id="editable-profile-phone" class="editable-container">
                            <ui:fragment rendered="#{!profileViewBean.editFieldList.contains('phone')}">
                                <ui:fragment rendered="#{profileViewBean.socialProfile.phone != null}">
                                    <p class="bold inline">#{profileViewBean.socialProfile.phone}</p>
                                    <ui:fragment rendered="#{profileViewBean.himself}">
                                        <i class="edit-pencil fa fa-pencil"></i>
                                    </ui:fragment>
                                </ui:fragment>
                                <ui:fragment rendered="#{profileViewBean.socialProfile.phone == null and profileViewBean.himself}">
                                    <a class="add-new">
                                        <i class="fa fa-plus-square"></i> 
                                        <span>Adicionar telefone</span>
                                    </a>
                                </ui:fragment>
                            </ui:fragment>
                            <ui:fragment rendered="#{profileViewBean.editFieldList.contains('phone')}">
                                <h:inputText pt:placeholder="Telefone" id="phone-input" maxlength="14" styleClass="editable-field " value="#{profileViewBean.editableFieldValue}"/>
                                <h:commandLink styleClass="edit-button">
                                    <i class="fa fa-chevron-circle-right"></i>
                                    <f:ajax listener="#{profileViewBean.editField('phone')}" execute="phone-input" render="editable-profile-phone"></f:ajax>
                                </h:commandLink>
                            </ui:fragment>
                            <h:commandLink styleClass="add-new-action phone">
                                <f:ajax listener="#{profileViewBean.showEditField('phone')}" render="editable-profile-phone"></f:ajax>
                            </h:commandLink>
                        </h:panelGroup>
                        <br/>
                        <h:panelGroup layout="block" id="editable-profile-address" class="editable-container">
                            <ui:fragment rendered="#{!profileViewBean.editFieldList.contains('address')}">
                                <ui:fragment rendered="#{profileViewBean.socialProfile.address != null
                                                         or profileViewBean.socialProfile.number != null 
                                                         or profileViewBean.socialProfile.neighborhood != null 
                                                         or profileViewBean.socialProfile.zipcode != null 
                                                         or profileViewBean.socialProfile.cityId.name != null 
                                                         or profileViewBean.socialProfile.stateId.name != null 
                                                         or profileViewBean.socialProfile.countryId.name != null }">
                                    <div class="inline-block">
                                        <p>
                                            #{profileViewBean.socialProfile.address}<ui:fragment rendered="#{profileViewBean.socialProfile.address != null and profileViewBean.socialProfile.number != null}">, </ui:fragment>
                                                #{profileViewBean.socialProfile.number}
                                        </p>
                                        <p> 
                                            <ui:fragment rendered="#{profileViewBean.socialProfile.neighborhood != null}">Bairro #{profileViewBean.socialProfile.neighborhood}</ui:fragment>
                                            <ui:fragment rendered="#{profileViewBean.socialProfile.neighborhood != null and profileViewBean.socialProfile.zipcode != null}">. </ui:fragment>
                                                #{profileViewBean.socialProfile.zipcode}
                                        </p>
                                        <p>
                                            #{profileViewBean.socialProfile.cityId.name}
                                            <ui:fragment rendered="#{profileViewBean.socialProfile.cityId.name != null}"> - </ui:fragment> 
                                                #{profileViewBean.socialProfile.stateId.name}
                                            <ui:fragment rendered="#{profileViewBean.socialProfile.stateId.name != null}"> - </ui:fragment> 
                                                #{profileViewBean.socialProfile.countryId.name}
                                        </p>
                                    </div>
                                    <ui:fragment rendered="#{profileViewBean.himself}">
                                        <i class="edit-pencil fa fa-pencil"></i>
                                    </ui:fragment>
                                </ui:fragment>
                                <ui:fragment rendered="#{profileViewBean.socialProfile.address == null 
                                                         and profileViewBean.socialProfile.number == null 
                                                         and profileViewBean.socialProfile.neighborhood == null 
                                                         and profileViewBean.socialProfile.zipcode == null 
                                                         and profileViewBean.socialProfile.cityId.name == null 
                                                         and profileViewBean.socialProfile.stateId.name == null 
                                                         and profileViewBean.socialProfile.countryId.name == null 
                                                         and profileViewBean.himself}">
                                    <a class="add-new">
                                        <i class="fa fa-plus-square"></i> 
                                        <span>Adicionar endereço</span>
                                    </a>
                                </ui:fragment>
                            </ui:fragment>
                            <ui:fragment rendered="#{profileViewBean.editFieldList.contains('address')}">
                                <h:panelGroup id="address-inputs" layout="block">
                                    <h:inputText pt:placeholder="Endereço" styleClass="editable-field editable-address" value="#{profileViewBean.editableFieldValues[0]}"/>
                                    <h:inputText pt:placeholder="Número" pt:type="number" styleClass="editable-field editable-number" value="#{profileViewBean.editableFieldValues[1]}"/><br/>
                                    <h:inputText pt:placeholder="Bairro" styleClass="editable-field editable-neighborhood" value="#{profileViewBean.editableFieldValues[2]}"/>
                                    <h:inputText pt:placeholder="CEP" styleClass="editable-field editable-cep" value="#{profileViewBean.editableFieldValues[3]}"/><br/>
                                    <div class="select">
                                        <h:selectOneMenu value="#{profileViewBean.editableFieldValues[6]}" class="country">
                                            <f:selectItem itemLabel="País" itemValue=""/>
                                            <f:selectItems value="#{profileViewBean.countryList}" var="country" itemLabel="#{country.name}" itemValue="#{country.id}"/>
                                            <f:ajax event="change" listener="#{profileViewBean.loadStates()}" render="state-container city-container"/>
                                        </h:selectOneMenu>
                                    </div>
                                    <h:panelGroup layout="block" id="state-container" class="select">
                                        <h:selectOneMenu value="#{profileViewBean.editableFieldValues[5]}" class="state">
                                            <f:selectItem itemLabel="Estado" itemValue=""/>
                                            <f:selectItems value="#{profileViewBean.stateList}" var="state" itemLabel="#{state.name}" itemValue="#{state.id}"/>
                                            <f:ajax listener="#{profileViewBean.loadCities()}" render="city-container"/>
                                        </h:selectOneMenu>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" id="city-container" class="select">
                                        <h:selectOneMenu value="#{profileViewBean.editableFieldValues[4]}" class="city">
                                            <f:selectItem itemLabel="Cidade" itemValue=""/>
                                            <f:selectItems value="#{profileViewBean.cityList}" var="city" itemLabel="#{city.name}" itemValue="#{city.id}"/>
                                        </h:selectOneMenu>
                                    </h:panelGroup>
                                </h:panelGroup>
                                <h:commandLink styleClass="edit-button">
                                    <i class="fa fa-chevron-circle-right"></i>
                                    <f:ajax listener="#{profileViewBean.editField('address')}" execute="address-inputs" render="editable-profile-address"></f:ajax>
                                </h:commandLink>
                            </ui:fragment>
                            <h:commandLink styleClass="add-new-action address">
                                <f:ajax listener="#{profileViewBean.showEditField('address')}" render="editable-profile-address"></f:ajax>
                            </h:commandLink>
                        </h:panelGroup>
                    </div>
                    <div class="clear"></div>
                    <div class="profile-resume-history">
                        <div class="profile-history-container">
                            <p class="profile-history-title">Educação</p>
                        </div>
                        <ui:repeat value="#{profileViewBean.socialProfile.educationsCollection}" var="education">
                            <div class="profile-history-list">
                                <div class="profile-history-date">
                                    <h3>
                                        <h:outputText value="#{education.dataBegin}">
                                            <f:convertDateTime pattern="MM/yyyy" timeZone="GMT-3"></f:convertDateTime>
                                        </h:outputText> 
                                        - 
                                        <h:outputText value="#{education.dataEnd}">
                                            <f:convertDateTime pattern="MM/yyyy" timeZone="GMT-3"></f:convertDateTime>
                                        </h:outputText>
                                    </h3>
                                </div>
                                <div class="profile-history-description">
                                    <p>#{education.nameId.scholarityId.description}</p>
                                    <p>#{education.nameId.name}</p>
                                    <p class="italic">#{education.locationId.name}</p>
                                </div>
                                <div class="clear"></div>
                            </div>
                        </ui:repeat>
                        <div class="profile-history-container">
                            <p class="profile-history-title">Experiência</p>
                        </div>
                        <ui:repeat value="#{profileViewBean.socialProfile.experiencesCollection}" var="experience">
                            <div class="profile-history-list">
                                <div class="profile-history-date">
                                    <h3>
                                        <h:outputText value="#{experience.dataBegin}">
                                            <f:convertDateTime pattern="MM/yyyy" timeZone="GMT-3"></f:convertDateTime>
                                        </h:outputText> 
                                        - 
                                        <h:outputText value="#{experience.dataEnd}">
                                            <f:convertDateTime pattern="MM/yyyy" timeZone="GMT-3"></f:convertDateTime>
                                        </h:outputText>
                                    </h3>
                                </div>
                                <div class="profile-history-description">
                                    <p>#{experience.nameId.name}</p>
                                    <p class="italic">#{experience.locationId.name}</p>
                                </div>
                                <div class="clear"></div>
                            </div>
                        </ui:repeat>
                    </div>
                </div>
                <div class="profile-column-right">
                    <h:commandLink class="btn-gray" action="#{profileViewBean.downloadPDF()}">
                        Gerar PDF
                    </h:commandLink>
                </div>
                <div class="clear"></div>
            </div>
            <a id="open-image-cropping-modal" href="#image-cropping-modal"></a>
            <div id="image-cropping-modal" class="image-cropping-modal">
                <div>
                    <h1 class="modal-title">Cortar foto</h1>
                    <hr/>
                    <a href="#close" title="Close" id="close-image-cropping-modal" class="close-image-cropping-modal">X</a>
                    <div class="photo-container">
                        <img class="original-uploaded-image"/>
                    </div>
                    <hr/>
                    <div class="modal-buttons">
                        <span class="image-cropping-button cut-photo">
                            Cortar e salvar
                        </span>
                        <a href="#close" title="Close" class="image-cropping-button cancel">Cancelar</a>
                        <div class="clear"></div>
                    </div>
                </div>
            </div>
            <h:commandLink styleClass="upload-photo" action="#{profileViewBean.uploadPhoto('photo')}"/>
            <h:commandLink styleClass="upload-cover-photo" action="#{profileViewBean.uploadPhoto('cover')}"/>
            <h:inputFile id="browse-photo" pt:accept="image/x-png, image/jpeg" styleClass="hidden" value="#{profileViewBean.uploadedPhoto}"/>
            <h:inputHidden id="original-uploaded-image-tracker-x" value="#{profileViewBean.cropCoordinates[0]}"/>
            <h:inputHidden id="original-uploaded-image-tracker-y" value="#{profileViewBean.cropCoordinates[1]}"/>
            <h:inputHidden id="original-uploaded-image-tracker-w" value="#{profileViewBean.cropCoordinates[2]}"/>
            <h:inputHidden id="original-uploaded-image-tracker-h" value="#{profileViewBean.cropCoordinates[3]}"/>
        </h:form>
    </ui:define>
    <!-- BEGIN PAGE SCRIPTS -->
    <ui:define name="scripts">
        <script type="text/javascript" src="../resources/lib/js/jquery.Jcrop.min.js"></script>
        <script type="text/javascript" src="../resources/lib/js/jquery.maskedinput.min.js"></script>
        <script type="text/javascript" charset="UTF-8" src="../resources/common/js/profile-view.js"></script>
    </ui:define>
    <!-- END PAGE SCRIPTS -->
</ui:composition>