!function(n){"use strict";var t,e=function(e,s,a){var r=this,o=n(e),i={byPassKeys:[8,9,37,38,39,40],maskChars:{":":"(:)?","-":"(-)?",".":"(\\.)?","(":"(\\()?",")":"(\\))?","/":"(/)?",",":"(,)?",_:"(_)?"," ":"(\\s)?","+":"(\\+)?"},translationNumbers:{0:"(\\d)",1:"(\\d)",2:"(\\d)",3:"(\\d)",4:"(\\d)",5:"(\\d)",6:"(\\d)",7:"(\\d)",8:"(\\d)",9:"(\\d)"},translation:{A:"([a-zA-Z0-9])",S:"([a-zA-Z])"}};r.init=function(){r.settings={},a=a||{},i.translation=n.extend({},i.translation,i.translationNumbers),r.settings=n.extend(!0,{},i,a),r.settings.specialChars=n.extend({},r.settings.maskChars,r.settings.translation),o.each(function(){s=l.resolveDynamicMask(s,n(this).val(),t,n(this),a),o.attr("maxlength",s.length),o.attr("autocomplete","off"),l.destroyEvents(),l.setOnKeyUp(),l.setOnPaste()})};var l={resolveDynamicMask:function(n,t,e,s,a){return"function"==typeof n?n(t,e,s,a):n},onlyNonMaskChars:function(t){return n.each(r.settings.maskChars,function(n){t=t.replace(new RegExp(r.settings.maskChars[n],"g"),"")}),t},onPasteMethod:function(){setTimeout(function(){o.trigger("keyup")},100)},setOnPaste:function(){l.hasOnSupport()?o.on("paste",l.onPasteMethod):o.onpaste=l.onPasteMethod},setOnKeyUp:function(){o.keyup(l.maskBehaviour).trigger("keyup")},hasOnSupport:function(){return n.isFunction(n.on)},destroyEvents:function(){o.unbind("keyup").unbind("onpaste")},maskBehaviour:function(t){t=t||window.event;var e=t.keyCode||t.which;if(n.inArray(e,r.settings.byPassKeys)>-1)return!0;var i=l.onlyNonMaskChars(o.val()),u=o.val().length-1,g=o.val()[u],h="boolean"==typeof a.reverse&&a.reverse===!0?l.getProportionalReverseMask(i,s):l.getProportionalMask(i,s);if(g===s[u]&&r.settings.maskChars[g])return o.val(l.cleanBullShit(o.val(),s)),!0;var c=l.applyMask(t,o,h,a);return c!==o.val()&&o.val(c).trigger("change"),l.seekCallbacks(t,a,c,s,o)},applyMask:function(n,t,e){var s=l.onlyNonMaskChars(t.val()).substring(0,l.onlyNonMaskChars(e).length);return l.cleanBullShit(s.replace(new RegExp(l.maskToRegex(e)),function(){for(var n=1,t="";n<arguments.length-2;n++)("undefined"==typeof arguments[n]||""===arguments[n])&&(arguments[n]=e.charAt(n-1)),t+=arguments[n];return t}),e)},getProportionalMask:function(n,t){for(var e=0,s=0;s<=n.length-1;){for(;r.settings.maskChars[t.charAt(e)];)e++;e++,s++}return t.substring(0,e)},getProportionalReverseMask:function(n,t){var e=0,s=0,a=0,o=t.length;for(e=o>=1?o:o-1,s=e;a<=n.length-1;){for(;r.settings.maskChars[t.charAt(s-1)];)s--;s--,a++}return s=t.length>=1?s:s-1,t.substring(e,s)},maskToRegex:function(n){for(var t=0,e="";t<n.length;t++)r.settings.specialChars[n.charAt(t)]&&(e+=r.settings.specialChars[n.charAt(t)]);return e},validDigit:function(n,t){return new RegExp(r.settings.specialChars[n].replace(/\?$/,"")).test(t)===!1?!1:!0},cleanBullShit:function(n,t,e){e=e||0,n=n.split("");for(var s=e,a=t.length;a>s;s++)if(l.validDigit(t.charAt(s),n[s])===!1&&"undefined"!=typeof n[s])return n[s]="",l.cleanBullShit(n.join(""),t,0);return n.join("")},seekCallbacks:function(n,t,e,s,a){t.onKeyPress&&void 0===n.isTrigger&&"function"==typeof t.onKeyPress&&t.onKeyPress(e,n,a,t),t.onComplete&&void 0===n.isTrigger&&e.length===s.length&&"function"==typeof t.onComplete&&t.onComplete(e,n,a,t)}};"boolean"==typeof QUNIT&&(r.__p=l),r.remove=function(){l.destroyEvents(),o.val(l.onlyNonMaskChars(o.val()))},r.init()};n.fn.mask=function(t,s){return this.each(function(){n(this).data("mask",new e(this,t,s))})}}(jQuery);